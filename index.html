<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูู ุณุฑูุน ุงูููููู</title>
    
    <!-- ุงูุฎุทูุท -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- ุงูุฃููููุงุช -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- ุงูุชูุณููุงุช -->
    <style>
        /* ุชูุณููุงุช ุงูุทูุงุฑุฆ ุฅุฐุง ุงููCSS ูุด ุดุบุงู */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #2d3436;
            min-height: 100vh;
            direction: rtl;
            padding: 20px;
        }
        
        .app-container {
            background: white;
            border-radius: 20px;
            min-height: 90vh;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .debug-info {
            background: #ff4757;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
    </style>
    
    <!-- ููู ุงูุชูุณููุงุช ุงูุฑุฆูุณู -->
    <link rel="stylesheet" href="style.css">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- ูุนูููุงุช ุงูุชุตุญูุญ -->
    <div class="debug-info" id="debug-info">
        โก ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...
    </div>
    
    <!-- ุดุงุดุฉ ุงูุชุญููู -->
    <div id="loading-screen" class="loading-screen">
        <div class="loader"></div>
        <p style="color: white; margin-top: 20px;">ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...</p>
    </div>
    
    <!-- ุงูุชุทุจูู ุงูุฑุฆูุณู -->
    <div id="app" class="app-container">
        <!-- ุงูููุฏุฑ -->
        <header class="game-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">๐ฐ</span>
                    <h1>ูู ุณุฑูุน ุงูููููู</h1>
                </div>
                
                <div class="header-controls">
                    <button id="sound-toggle" class="control-btn">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    
                    <button id="stats-btn" class="control-btn">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    
                    <div id="premium-badge" class="premium-badge" style="display: none;">
                        <i class="fas fa-crown"></i>
                        <span>ูููุฒ</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <main id="main-content">
            <!-- ุดุงุดุฉ ุชุฑุญูุจ ุจุณูุทุฉ -->
            <div id="welcome-screen" style="padding: 40px; text-align: center;">
                <h2 style="color: #0984e3; margin-bottom: 20px;">๐ฎ ูู ุณุฑูุน ุงูููููู</h2>
                <p style="color: #636e72; margin-bottom: 30px;">ูุนุจุฉ ุงููุณุงุจูุฉ ุงูุนุฑุจูุฉ ููููุฒ ุจููููู ุฏููุงุฑ</p>
                
                <button id="start-game-test" style="
                    background: linear-gradient(135deg, #0984e3, #4a69bd);
                    color: white;
                    border: none;
                    padding: 15px 30px;
                    border-radius: 10px;
                    font-size: 18px;
                    font-weight: bold;
                    cursor: pointer;
                    margin: 10px;
                ">
                    <i class="fas fa-play"></i> ุงุจุฏุฃ ุงููุนุจุฉ
                </button>
                
                <div style="margin-top: 40px; color: #888; font-size: 14px;">
                    <p>ุฅุฐุง ุดุงูู ูุงูุดุงุดุฉุ ุงููHTML ูCSS ุดุบุงููู</p>
                    <p>ุงูุชุญ F12 โ Console ูุดูู ุฅุฐุง ูู ุฃุฎุทุงุก</p>
                </div>
            </div>
        </main>
        
        <!-- ุงูุชููู -->
        <nav class="game-nav">
            <button id="home-btn" class="nav-btn active">
                <i class="fas fa-home"></i>
                <span>ุงูุฑุฆูุณูุฉ</span>
            </button>
            
            <button id="play-btn" class="nav-btn">
                <i class="fas fa-play-circle"></i>
                <span>ุงูุนุจ</span>
            </button>
            
            <button id="leaderboard-btn" class="nav-btn">
                <i class="fas fa-trophy"></i>
                <span>ุงููุชุตุฏุฑูู</span>
            </button>
            
            <button id="more-btn" class="nav-btn">
                <i class="fas fa-ellipsis-h"></i>
                <span>ุงููุฒูุฏ</span>
            </button>
        </nav>
    </div>
    
    <!-- ุงูุญุงููุงุช -->
    <div id="notification-container" class="notification-container"></div>
    <div id="modals-container" class="modals-container"></div>
    
    <!-- ุงูุฃุตูุงุช -->
    <audio id="sound-correct" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
    <audio id="sound-click" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
    <audio id="sound-win" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
    
    <!-- ุณูุฑูุจุชุงุช ุงูุชุตุญูุญ -->
    <script>
        // ุฏุงูุฉ ุชุตุญูุญ
        function debugLog(message, type = 'info') {
            const colors = {
                info: '#0984e3',
                success: '#00b894',
                error: '#e17055',
                warning: '#fdcb6e'
            };
            
            console.log(`%c${message}`, `color: ${colors[type]}; font-weight: bold;`);
            document.getElementById('debug-info').innerHTML = `โก ${message}`;
            document.getElementById('debug-info').style.background = colors[type];
        }
        
        // ุชุญูู ูู ุชุญููู ุงููููุงุช
        function checkFileLoaded(filename) {
            return new Promise((resolve) => {
                const startTime = Date.now();
                const checkInterval = setInterval(() => {
                    if (Date.now() - startTime > 5000) {
                        clearInterval(checkInterval);
                        resolve(false);
                    }
                    
                    try {
                        if (filename === 'style.css') {
                            const styles = document.styleSheets;
                            for (let i = 0; i < styles.length; i++) {
                                if (styles[i].href && styles[i].href.includes(filename)) {
                                    clearInterval(checkInterval);
                                    resolve(true);
                                }
                            }
                        } else if (window[filename.replace('.js', '')]) {
                            clearInterval(checkInterval);
                            resolve(true);
                        }
                    } catch (e) {
                        // continue
                    }
                }, 100);
            });
        }
        
        // ุจุฏุก ุงูุชุตุญูุญ
        async function startDebug() {
            debugLog('ุจุฏุก ุชุตุญูุญ ุงููุนุจุฉ...', 'info');
            
            // ุชุญูู ูู CSS
            const cssLoaded = await checkFileLoaded('style.css');
            if (cssLoaded) {
                debugLog('โ ููู ุงูุชูุณููุงุช ูุญูู', 'success');
            } else {
                debugLog('โ ููู ุงูุชูุณููุงุช ุบูุฑ ูุญูู', 'error');
                // ุชุญููู CSS ุงุญุชูุงุทู
                const backupCSS = `
                    <style>
                        /* ุชูุณููุงุช ุงุญุชูุงุทูุฉ */
                        .game-header { background: #2d3436; color: white; padding: 15px; }
                        .game-nav { background: #f8f9fa; display: flex; padding: 10px; }
                        .nav-btn { flex: 1; text-align: center; padding: 10px; }
                    </style>
                `;
                document.head.insertAdjacentHTML('beforeend', backupCSS);
            }
            
            // ุชุญููู ุงูุณูุฑูุจุชุงุช ุชุฏุฑูุฌูุงู
            const scripts = [
                'config.js',
                'security.js', 
                'question-bank.js',
                'subscription.js',
                'script.js'
            ];
            
            for (let i = 0; i < scripts.length; i++) {
                try {
                    const script = document.createElement('script');
                    script.src = scripts[i];
                    script.onload = () => debugLog(`โ ${scripts[i]} ูุญูู`, 'success');
                    script.onerror = () => debugLog(`โ ${scripts[i]} ูุดู ุงูุชุญููู`, 'error');
                    document.head.appendChild(script);
                    
                    // ุงูุชุธุฑ ููููุงู ุจูู ูู ุณูุฑูุจุช
                    await new Promise(resolve => setTimeout(resolve, 500));
                } catch (error) {
                    debugLog(`ุฎุทุฃ ูู ${scripts[i]}: ${error.message}`, 'error');
                }
            }
            
            // ุจุฏุก ุงููุนุจุฉ ุจุนุฏ ุชุญููู ูู ุดูุก
            setTimeout(() => {
                if (window.MillionaireGame) {
                    try {
                        window.game = new MillionaireGame();
                        debugLog('๐ฎ ุงููุนุจุฉ ุจุฏุฃุช ุจูุฌุงุญ!', 'success');
                        
                        // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู
                        document.getElementById('loading-screen').style.display = 'none';
                        document.getElementById('debug-info').style.display = 'none';
                        
                    } catch (error) {
                        debugLog(`ุฎุทุฃ ูู ุจุฏุก ุงููุนุจุฉ: ${error.message}`, 'error');
                        showErrorScreen(error);
                    }
                } else {
                    debugLog('โ ูุญุฑู ุงููุนุจุฉ ุบูุฑ ูุญูู', 'error');
                    showErrorScreen(new Error('ูุญุฑู ุงููุนุจุฉ ุบูุฑ ูุญูู'));
                }
            }, 3000);
        }
        
        // ุนุฑุถ ุดุงุดุฉ ุงูุฎุทุฃ
        function showErrorScreen(error) {
            document.getElementById('main-content').innerHTML = `
                <div style="padding: 40px; text-align: center;">
                    <h2 style="color: #e17055;">โ ุญุฏุซ ุฎุทุฃ</h2>
                    <p style="color: #636e72; margin: 20px 0;">${error.message}</p>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: right;">
                        <h4>ุฎุทูุงุช ุงูุญู:</h4>
                        <ol style="margin: 10px 0; padding-right: 20px;">
                            <li>ุงูุชุญ F12 โ Console</li>
                            <li>ุดูู ุงูุฃุฎุทุงุก ููู ุจุชุญูู ุนููุง</li>
                            <li>ุชุฃูุฏ ุฅูู ูู ุงููููุงุช ููุฌูุฏุฉ</li>
                            <li>ุฌุฑุจ ุชูุชุญ ุงูุตูุญุฉ ุนูู ูุชุตูุญ ุชุงูู</li>
                        </ol>
                    </div>
                    <button onclick="location.reload()" style="
                        background: #0984e3;
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 5px;
                        margin-top: 20px;
                        cursor: pointer;
                    ">
                        <i class="fas fa-redo"></i> ุฅุนุงุฏุฉ ุชุญููู
                    </button>
                </div>
            `;
        }
        
        // ุจุฏุก ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('DOMContentLoaded', () => {
            debugLog('ุงูุตูุญุฉ ูุญููุฉุ ุจุฏุก ุงูุชุตุญูุญ...', 'info');
            startDebug();
        });
        
        // ุฒุฑ ุงูุงุฎุชุจุงุฑ
        document.getElementById('start-game-test')?.addEventListener('click', () => {
            alert('JavaScript ุดุบุงู! ุฅุฐุง ุงููุนุจุฉ ูุง ุงุดุชุบูุชุ ุดูู Console');
        });
    </script>
    
    <!-- ุชุญููู ุงููููุงุช ุงูุฃุณุงุณูุฉ -->
    <script src="config.js"></script>
    <script src="security.js"></script>
    <script src="question-bank.js"></script>
    <script src="subscription.js"></script>
    <script src="script.js"></script>
</body>
</html>
