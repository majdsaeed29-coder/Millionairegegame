<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููููููุฑ ุงูุฐูุจู - ูุนุจุฉ ุงูุฐูุงุก ููููุฒ ุจุงูููููู</title>
    
    <!-- PWA Configuration -->
    <meta name="description" content="ูุนุจุฉ ูุณุงุจูุฉ ุงูุฐูุงุก ููููุฒ ุจููููู ุฏููุงุฑ">
    <meta name="theme-color" content="#D4AF37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Application Styles -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service_worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registered: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="screen active">
        <div class="loader"></div>
        <div class="loading-text">ุฌุงุฑู ุชุญููู ุงูููููููุฑ ุงูุฐูุจู...</div>
        <button id="skip-loading" class="btn btn-primary" style="margin-top: 30px;">
            ุชุฎุทู ุงูุชุญููู
        </button>
    </div>

    <!-- Main Application Container -->
    <div id="app" style="display: none;">
        <!-- Authentication Screen -->
        <div id="auth-screen" class="screen">
            <div class="auth-box">
                <h1 style="text-align: center; color: var(--gold-primary); margin-bottom: 30px; font-size: 2.5rem;">
                    <i class="fas fa-crown"></i> ุงูููููููุฑ ุงูุฐูุจู
                </h1>
                <p style="text-align: center; color: #aaa; margin-bottom: 30px;">
                    ุงุฎุชุจุฑ ุฐูุงุกู ููููุฒ ุจููููู ุฏููุงุฑ
                </p>
                
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">ุชุณุฌูู ุงูุฏุฎูู</button>
                    <button class="auth-tab" data-tab="register">ุฅูุดุงุก ุญุณุงุจ</button>
                </div>
                
                <!-- Login Form -->
                <form id="login-form" class="auth-form active">
                    <div class="form-group">
                        <label for="login-username"><i class="fas fa-user"></i> ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="login-username" class="form-control" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password"><i class="fas fa-lock"></i> ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="login-password" class="form-control" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                        <i class="fas fa-sign-in-alt"></i> ุชุณุฌูู ุงูุฏุฎูู
                    </button>
                    
                    <p style="text-align: center; margin-top: 20px; color: #aaa;">
                        <a href="#" id="admin-login-link" style="color: var(--gold-primary); text-decoration: none;">
                            <i class="fas fa-user-shield"></i> ุฏุฎูู ุงููุณุคูู (admin / Admin@2024)
                        </a>
                    </p>
                </form>
                
                <!-- Registration Form -->
                <form id="register-form" class="auth-form">
                    <div class="form-group">
                        <label for="register-username"><i class="fas fa-user-plus"></i> ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="register-username" class="form-control" placeholder="ุฃุฏุฎู ุงุณู ูุณุชุฎุฏู ุฌุฏูุฏ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password"><i class="fas fa-lock"></i> ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="register-password" class="form-control" placeholder="ุฃุฏุฎู ูููุฉ ูุฑูุฑ ูููุฉ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email"><i class="fas fa-envelope"></i> ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)</label>
                        <input type="email" id="register-email" class="form-control" placeholder="example@email.com">
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                        <i class="fas fa-user-plus"></i> ุฅูุดุงุก ุญุณุงุจ
                    </button>
                </form>
            </div>
        </div>

        <!-- Main Menu Screen -->
        <div id="main-menu-screen" class="screen">
            <div class="menu-container">
                <div class="user-header">
                    <h1 id="welcome-text" class="user-welcome">ูุฑุญุจุงู!</h1>
                    <p style="color: var(--gold-primary); font-size: 1.2rem;">ุงุณุชุนุฏ ููููุฒ ุจููููู ุฏููุงุฑ</p>
                    
                    <div class="user-stats">
                        <div class="stat-item">
                            <div id="balance-display" class="stat-value">0 $</div>
                            <div class="stat-label">ุงูุฑุตูุฏ</div>
                        </div>
                        
                        <div class="stat-item">
                            <div id="level-display" class="stat-value">ุงููุณุชูู 1</div>
                            <div class="stat-label">ุงููุณุชูู</div>
                        </div>
                        
                        <div class="stat-item">
                            <div id="highscore-display" class="stat-value">0</div>
                            <div class="stat-label">ุฃุนูู ูุชูุฌุฉ</div>
                        </div>
                        
                        <div class="stat-item">
                            <div id="games-played-display" class="stat-value">0</div>
                            <div class="stat-label">ุนุฏุฏ ุงูุฃูุนุงุจ</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-grid">
                    <!-- Play Game Card -->
                    <div class="menu-card" id="play-btn">
                        <div class="menu-icon">๐ฎ</div>
                        <h3>ุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉ</h3>
                        <p>ุงุจุฏุฃ ุชุญุฏู ุงูููููู ุฏููุงุฑ ูุน 15 ุณุคุงูุงู ูุชุชุงููุฉ</p>
                    </div>
                    
                    <!-- Categories Card -->
                    <div class="menu-card" id="categories-btn">
                        <div class="menu-icon">๐</div>
                        <h3>ุงูุชุตูููุงุช</h3>
                        <p>ุงุฎุชุฑ ููุงุถูุน ุงูุฃุณุฆูุฉ ุงูุชู ุชุฑูุฏ ุงูุชุญุฏู ูููุง</p>
                    </div>
                    
                    <!-- Leaderboard Card -->
                    <div class="menu-card" id="leaderboard-btn">
                        <div class="menu-icon">๐</div>
                        <h3>ููุญุฉ ุงููุชุตุฏุฑูู</h3>
                        <p>ุดุงูุฏ ุฃูุถู ุงููุงุนุจูู ูุชูุงูุณ ุนูู ุงููุฑูุฒ ุงูุฃูู</p>
                    </div>
                    
                    <!-- Settings Card -->
                    <div class="menu-card" id="settings-btn">
                        <div class="menu-icon">โ๏ธ</div>
                        <h3>ุงูุฅุนุฏุงุฏุงุช</h3>
                        <p>ุฎุตูุต ุงูุตูุชุ ุงููุธูุฑุ ูุฅุนุฏุงุฏุงุช ุงููุนุจุฉ</p>
                    </div>
                    
                    <!-- Admin Panel Card (Only for Admins) -->
                    <div class="menu-card" id="admin-btn" style="display: none;">
                        <div class="menu-icon">๐ก๏ธ</div>
                        <h3>ููุญุฉ ุงูุชุญูู</h3>
                        <p>ุฅุฏุงุฑุฉ ุงูุฃุณุฆูุฉุ ุงููุณุชุฎุฏูููุ ูุงูุฅุญุตุงุฆูุงุช</p>
                    </div>
                    
                    <!-- Logout Card -->
                    <div class="menu-card" id="logout-btn">
                        <div class="menu-icon">๐ช</div>
                        <h3>ุชุณุฌูู ุงูุฎุฑูุฌ</h3>
                        <p>ุงูุฎุฑูุฌ ูู ุญุณุงุจู ูุงูุนูุฏุฉ ูุดุงุดุฉ ุงูุจุฏุงูุฉ</p>
                    </div>
                </div>
                
                <!-- Footer -->
                <div style="text-align: center; margin-top: 40px; color: #777;">
                    <p>ุงูููููููุฑ ุงูุฐูุจู v2.0.0 | ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Game content will be dynamically loaded here -->
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <!-- Results content will be dynamically loaded here -->
        </div>

        <!-- Admin Screen -->
        <div id="admin-screen" class="screen">
            <!-- Admin panel content will be dynamically loaded here -->
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="settings-container">
                <div class="settings-header">
                    <h1><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช</h1>
                    <button class="btn btn-secondary" id="back-to-menu-from-settings">
                        <i class="fas fa-arrow-left"></i> ุงูุนูุฏุฉ ูููุงุฆูุฉ
                    </button>
                </div>
                
                <div class="settings-content">
                    <!-- Settings content will be added dynamically -->
                </div>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <div class="leaderboard-container">
                <div class="leaderboard-header">
                    <h1><i class="fas fa-trophy"></i> ููุญุฉ ุงููุชุตุฏุฑูู</h1>
                    <button class="btn btn-secondary" id="back-to-menu-from-leaderboard">
                        <i class="fas fa-arrow-left"></i> ุงูุนูุฏุฉ ูููุงุฆูุฉ
                    </button>
                </div>
                
                <div class="leaderboard-content">
                    <!-- Leaderboard content will be added dynamically -->
                </div>
            </div>
        </div>

        <!-- Categories Selection Screen -->
        <div id="categories-screen" class="screen">
            <div class="categories-container">
                <div class="categories-header">
                    <h1><i class="fas fa-book"></i> ุงุฎุชุฑ ุงูุชุตูููุงุช</h1>
                    <button class="btn btn-secondary" id="back-to-menu-from-categories">
                        <i class="fas fa-arrow-left"></i> ุงูุนูุฏุฉ ูููุงุฆูุฉ
                    </button>
                </div>
                
                <div class="categories-content">
                    <!-- Categories selection will be added dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <!-- Configuration -->
    <script src="js/config.js"></script>
    
    <!-- Core Systems -->
    <script src="js/auth_system.js"></script>
    <script src="js/question_manager.js"></script>
    <script src="js/game_engine.js"></script>
    
    <!-- UI Components -->
    <script src="js/ui_manager.js"></script>
    <script src="js/admin_panel.js"></script>
    
    <!-- Main Application -->
    <script src="js/app.js"></script>
    
    <!-- Application Initialization -->
    <script>
        // Initialize application when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Skip loading button
            document.getElementById('skip-loading').addEventListener('click', function() {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('app').style.display = 'block';
                
                // Initialize the game
                window.gameApp = new MillionaireApp();
            });
            
            // Auto hide loading after 3 seconds
            setTimeout(function() {
                document.getElementById('loading').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('app').style.display = 'block';
                    
                    // Initialize the game
                    window.gameApp = new MillionaireApp();
                }, 500);
            }, 3000);
        });
        
        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button (you can add this to your UI)
            setTimeout(() => {
                if (deferredPrompt && confirm('ูู ุชุฑูุฏ ุชุซุจูุช ุชุทุจูู ุงูููููููุฑ ุงูุฐูุจู ุนูู ุฌูุงุฒูุ')) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('User accepted the install prompt');
                        }
                        deferredPrompt = null;
                    });
                }
            }, 5000);
        });
    </script>
</body>
</html>
